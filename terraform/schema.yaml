title: Oracle Essbase
description: Oracle Essbase on Oracle Cloud Infrastructure
schemaVersion: 1.1.0
version: "20190304"
locale: "en"

# URL of Logo Icon used on Application Information tab. Logo must be 130x130 pixels.
# (Optional)
logoUrl: https://cloudmarketplace.oracle.com/marketplace/content?contentId=63497741

# Used in Application Information tab to Hyperlink Title and Logo to the Marketplace listing.
# Also used to link to Listing Usage section for "View Instructions".
# (Optional) If it is missing, Application Information uses the
# "marketplace-listing-id" tag for the same purpose.
source:
  type: marketplace
  reference: 63497640

groupings:
- title: "General Settings"
  variables:
  - ${stack_version}
  - ${stack_display_name}
  - ${compartment_ocid}

- title: "Essbase Instance"
  variables:
  - ${essbase_listing_id}
  - ${essbase_listing_resource_version}
  - ${essbase_listing_resource_id}
  - ${enable_cluster}
  - ${instance_availability_domain}
  - ${instance_count}
  - ${instance_shape}
  - ${instance_shape_ocpus}
  - ${data_volume_size}
  - ${config_volume_size}
  - ${temp_volume_size}
  - ${ssh_authorized_keys}
  - ${essbase_admin_username}
  - ${essbase_admin_password_id}
  - ${instance_timezone}
  - ${enable_embedded_proxy}

- title: "Monitoring Configuration"
  variables:
  - ${notification_topic_id}
  - ${enable_essbase_monitoring}

- title: "Identity Configuration"
  variables:
  - ${identity_provider}
  - ${idcs_tenant}
  - ${idcs_client_id}
  - ${idcs_client_secret_id}
  - ${idcs_external_admin_username}

- title: "Network Configuration"
  variables:
  - ${create_public_essbase_instance}
  - ${use_existing_vcn}
  - ${show_advanced_options}
  - ${existing_vcn_compartment_id}
  - ${vcn_cidr}
  - ${vcn_dns_label}
  - ${existing_vcn_id}
  - ${application_subnet_cidr}
  - ${existing_application_subnet_compartment_id}
  - ${existing_application_subnet_id}
  - ${storage_subnet_cidr}
  - ${existing_storage_subnet_compartment_id}
  - ${existing_storage_subnet_id}
  - ${instance_hostname_label_prefix}

- title: "Database Configuration"
  variables:
  - ${use_existing_db}
  - ${existing_db_type}
  - ${existing_db_compartment_id}
  - ${existing_db_id}
  - ${db_admin_password_id}
  - ${db_license_model}
  - ${existing_oci_db_system_id}
  - ${existing_oci_db_system_dbhome_id}
  - ${existing_oci_db_system_database_id}
  - ${existing_oci_db_system_database_pdb_name}
  - ${oci_db_admin_username}
  - ${oci_db_admin_password_id}
  - ${rcu_schema_prefix}

- title: "Load Balancer Configuration"
  variables:
  - ${create_load_balancer}
  - ${create_public_load_balancer}
  - ${load_balancer_shape}
  - ${load_balancer_subnet_cidr}
  - ${existing_load_balancer_subnet_compartment_id}
  - ${existing_load_balancer_subnet_id}
  - ${existing_load_balancer_subnet_id_2}

- title: "Bastion Configuration"
  variables:
  - ${create_bastion}
  - ${bastion_listing_id}
  - ${bastion_listing_resource_version}
  - ${bastion_listing_resource_id}
  - ${bastion_availability_domain}
  - ${bastion_instance_shape}
  - ${bastion_subnet_cidr}
  - ${existing_bastion_subnet_compartment_id}
  - ${existing_bastion_subnet_id}

- title: "Marketplace Configuration"
  variables:
  - ${marketplace_source_images}

variables:
  # General Configuration
  tenancy_ocid:
    title: Tenancy ID
    description: The Oracle Cloud Identifier (OCID) for your tenancy
    type: string
    required: true
    visible: false

  region:
    title: Region
    description: The region in which to create all resources
    type: oci:identity:region:name
    required: true
    visible: false

  compartment_ocid:
    title: Target Compartment
    description: The target compartment in which all provisioned resources will be created.
    type: oci:identity:compartment:id
    required: true

  user_ocid:
    title: User ID
    description: The Oracle Cloud Identifier (OCID) for the user
    type: string
    visible: false

  fingerprint:
    title: Private Key Fingerprint
    type: string
    visible: false

  private_key_path:
    title: Private Key Path
    type: string
    visible: false

  marketplace_source_images:
    required: false
    visible: false

  stack_version:
    title: Essbase Stack Version
    description: This is the version of the stack that you are deploying. This is purely for informational purposes only.
    type: string
    required: true

  stack_display_name:
    title: Stack Display Name
    description: Use this to identify resources generated by this template. If not specified, this will be automatically generated.
    type: string
    maxLength: 64
    pattern: "^([a-zA-Z_][a-zA-Z0-9\\-_]*)?$"
    required: false

  # Create Network options
  use_existing_vcn:
    title: Use Existing Network
    description: Select this option deploy Essbase components into an existing virtual cloud network (VCN).
    type: boolean
    default: false

  show_advanced_options:
    title: Show Advanced Network Options
    description: Enable advanced network options
    type: boolean
    default: false

  vcn_cidr:
    title: Virtual Network CIDR
    description: The CIDR to assign to the new virtual cloud network (VCN) to create for this service.
    type: string
    default: 10.0.0.0/16
    pattern: "^(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])\\/(3[0-2]|[1-2]?[0-9])$"
    visible:
      and:
      - ${show_advanced_options}
      - not:
        - ${use_existing_vcn}
    required: true

  vcn_dns_label:
    title: Virtual Network DNS Label
    description: The DNS label for the new virtual cloud network. If not provided, a random value will be generated.
    type: string
    pattern: "^([a-zA-Z][a-zA-Z0-9]{0,14})?$"
    required: false
    visible:
      and:
      - ${show_advanced_options}
      - not:
        - ${use_existing_vcn}

  application_subnet_cidr:
    title: Application Subnet CIDR
    description: The CIDR to assign to the subnet for the target Essbase compute node. This will be created as a regional subnet.
    type: string
    default: 10.0.1.0/24
    pattern: "^(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])\\/(3[0-2]|[1-2]?[0-9])$"
    visible:
      and:
      - ${show_advanced_options}
      - not:
        - ${use_existing_vcn}
    required: true

  storage_subnet_cidr:
    title: Storage Subnet CIDR
    description: The CIDR to assign to the storage subnet for the target Essbase compute node. This will be created as a regional subnet.
    type: string
    default: 10.0.5.0/24
    pattern: "^(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])\\/(3[0-2]|[1-2]?[0-9])$"
    visible:
      and:
      - ${show_advanced_options}
      - ${enable_cluster}
      - not:
        - ${use_existing_vcn}
    required: true


  create_public_essbase_instance:
    title: Public Essbase node visibility
    description: Select if you want the Essbase node to have a public IP address.
    type: boolean
    default: false

  existing_vcn_compartment_id:
    title: Target network compartment
    description: Select the compartment containing the target VCN.
    type: oci:identity:compartment:id
    default: ${compartment_ocid}
    visible: ${use_existing_vcn}
    required: true

  existing_vcn_id:
    title: Select Virtual Network
    description: Select an existing VCN in which to create the compute resources.
    type: oci:core:vcn:id
    visible: ${use_existing_vcn}
    required: true
    dependsOn:
      compartmentId: ${existing_vcn_compartment_id}

  existing_application_subnet_compartment_id:
    title: Target application subnet compartment
    description: Select the compartment containing the target application subnet.
    type: oci:identity:compartment:id
    default: ${compartment_ocid}
    visible: ${use_existing_vcn}
    required: true

  existing_application_subnet_id:
    title: Select Application Subnet
    description: Select an existing subnet for the target Essbase instance.
    type: oci:core:subnet:id
    visible: ${use_existing_vcn}
    dependsOn:
      compartmentId: ${existing_application_subnet_compartment_id}
      vcnId: ${existing_vcn_id}
      hidePrivateSubnet: ${create_public_essbase_instance}
    required: true

  existing_storage_subnet_compartment_id:
    title: Target storage subnet compartment
    description: Select the compartment containing the target application subnet.
    type: oci:identity:compartment:id
    default: ${compartment_ocid}
    visible:
      and:
      - ${enable_cluster}
      - ${use_existing_vcn}
    required: true

  existing_storage_subnet_id:
    title: Select Storage Subnet
    description: Select an existing subnet for the target Essbase instance.
    type: oci:core:subnet:id
    visible:
      and:
      - ${enable_cluster}
      - ${use_existing_vcn}
    dependsOn:
      compartmentId: ${existing_storage_subnet_compartment_id}
      vcnId: ${existing_vcn_id}
    required: true

  create_bastion:
    title: Provision Bastion
    description: Provision a bastion in Oracle Cloud Infrastructure to allow for connections.
    type: boolean
    default: false
    visible:
      not:
      - ${create_public_essbase_instance}

  bastion_listing_id:
    title: Bastion Listing OCID
    visible: false

  bastion_listing_resource_version:
    title: Bastion Image OCID
    visible: false

  bastion_listing_resource_id:
    title: Bastion Image OCID
    visible: false

  bastion_availability_domain:
    title: Bastion Availability Domain
    description: The name of the availability domain in which to create the bastion host.
    type: oci:identity:availabilitydomain:name
    required: true
    visible:
      and:
      - ${create_bastion}
      - not:
        - ${create_public_essbase_instance}
    dependsOn:
      compartmentId: ${compartment_ocid}

  bastion_subnet_cidr:
    title: Bastion Subnet CIDR
    description: The CIDR to assign to the subnet for the bastion host. This will be created as a regional subnet.
    type: string
    default: 10.0.2.0/24
    pattern: "^(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])\\/(3[0-2]|[1-2]?[0-9])$"
    visible:
      and:
      - ${show_advanced_options}
      - ${create_bastion}
      - not:
        - ${create_public_essbase_instance}
      - not:
        - ${use_existing_vcn}
    required: true

  existing_bastion_subnet_compartment_id:
    title: Target bastion subnet compartment
    description: Select the compartment containing the target bastion subnet.
    type: oci:identity:compartment:id
    default: ${compartment_ocid}
    visible:
      and:
      - ${use_existing_vcn}
      - ${create_bastion}
      - not:
        - ${create_public_essbase_instance}
    required: true

  existing_bastion_subnet_id:
    title: Select Bastion Subnet
    description: Select an existing subnet for creating the bastion host
    type: oci:core:subnet:id
    visible:
      and:
      - ${use_existing_vcn}
      - ${create_bastion}
      - not:
        - ${create_public_essbase_instance}
    required: true
    dependsOn:
      compartmentId: ${existing_bastion_subnet_compartment_id}
      vcnId: ${existing_vcn_id}

  bastion_instance_shape:
    title: Bastion Instance Shape
    description: The shape for the bastion compute instance.
    type: oci:core:instanceshape:name
    default: VM.Standard.E2.1
    visible:
      and:
      - ${create_bastion}
      - not:
        - ${create_public_essbase_instance}
    required: true
    dependsOn:
      compartmentId: ${compartment_ocid}
      imageId: ${bastion_listing_resource_id}

  # Essbase instance configuration
  essbase_listing_id:
    type: string
    visible: false

  essbase_listing_resource_version:
    type: string
    visible: false

  essbase_listing_resource_id:
    title: Essbase Compute Image OCID
    description: The published image that will be used for the Essbase compute instance.
    type: string
    pattern: "^ocid1\\.image\\.[a-zA-Z0-9\\.\\-\\_]+$"
    required: true

  instance_shape:
    title: Essbase Instance Shape
    description: The shape for the Essbase compute instance.
    type: oci:core:instanceshape:name
    default: VM.Standard2.4
    required: true
    dependsOn:
      compartmentId: ${compartment_ocid}
      imageId: ${essbase_listing_resource_id}

  instance_shape_ocpus:
    title: Essbase Instance OCPUs
    description: The number of OCPUs for the Essbase compute instance. Fewer than four OCPUs is not recommended for production workloads.
    type: integer
    default: 4
    minimum: 1
    maximum: 64
    required: true
    visible:
      or:
      - eq:
        - ${instance_shape}
        - "VM.Standard.E3.Flex"
      - eq:
        - ${instance_shape}
        - "VM.Standard.E4.Flex"

  enable_cluster:
    title: Enable Cluster Topology
    description: Select this to enable clustering support.
    type: boolean
    default: false
    visible: false

  instance_availability_domain:
    title: Essbase Availability Domain
    description: The name of the availability domain in which to create the Essbase compute instance.
    type: oci:identity:availabilitydomain:name
    required: true
    dependsOn:
      compartmentId: ${compartment_ocid}

  instance_count:
    title: Number of Nodes
    description: Number of nodes to create.
    type: integer
    default: 1
    minimum: 1
    maximum: 3
    visible: ${enable_cluster}

  instance_hostname_label_prefix:
    title: Essbase Instance Hostname Prefix
    description: The DNS hostname prefix for the Essbase compute instance. The hostname must be unique within the target subnet. If not provided, a random value will be generated. This value is ignored when using an existing network that does not allow for hostnames.
    type: string
    pattern: "^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)?$"
    required: false
    visible: ${show_advanced_options}

  instance_timezone:
    title: Essbase Instance Timezone
    description: Set the timezone of the Essbase compute instance.
    type: enum
    enum:
    - "UTC"
    - "Africa/Abidjan"
    - "Africa/Accra"
    - "Africa/Addis_Ababa"
    - "Africa/Algiers"
    - "Africa/Asmara"
    - "Africa/Bamako"
    - "Africa/Bangui"
    - "Africa/Banjul"
    - "Africa/Bissau"
    - "Africa/Blantyre"
    - "Africa/Brazzaville"
    - "Africa/Bujumbura"
    - "Africa/Cairo"
    - "Africa/Casablanca"
    - "Africa/Ceuta"
    - "Africa/Conakry"
    - "Africa/Dakar"
    - "Africa/Dar_es_Salaam"
    - "Africa/Djibouti"
    - "Africa/Douala"
    - "Africa/El_Aaiun"
    - "Africa/Freetown"
    - "Africa/Gaborone"
    - "Africa/Harare"
    - "Africa/Johannesburg"
    - "Africa/Juba"
    - "Africa/Kampala"
    - "Africa/Khartoum"
    - "Africa/Kigali"
    - "Africa/Kinshasa"
    - "Africa/Lagos"
    - "Africa/Libreville"
    - "Africa/Lome"
    - "Africa/Luanda"
    - "Africa/Lubumbashi"
    - "Africa/Lusaka"
    - "Africa/Malabo"
    - "Africa/Maputo"
    - "Africa/Maseru"
    - "Africa/Mbabane"
    - "Africa/Mogadishu"
    - "Africa/Monrovia"
    - "Africa/Nairobi"
    - "Africa/Ndjamena"
    - "Africa/Niamey"
    - "Africa/Nouakchott"
    - "Africa/Ouagadougou"
    - "Africa/Porto-Novo"
    - "Africa/Sao_Tome"
    - "Africa/Tripoli"
    - "Africa/Tunis"
    - "Africa/Windhoek"
    - "America/Adak"
    - "America/Anchorage"
    - "America/Anguilla"
    - "America/Antigua"
    - "America/Araguaina"
    - "America/Argentina/Buenos_Aires"
    - "America/Argentina/Catamarca"
    - "America/Argentina/Cordoba"
    - "America/Argentina/Jujuy"
    - "America/Argentina/La_Rioja"
    - "America/Argentina/Mendoza"
    - "America/Argentina/Rio_Gallegos"
    - "America/Argentina/Salta"
    - "America/Argentina/San_Juan"
    - "America/Argentina/San_Luis"
    - "America/Argentina/Tucuman"
    - "America/Argentina/Ushuaia"
    - "America/Aruba"
    - "America/Asuncion"
    - "America/Atikokan"
    - "America/Bahia"
    - "America/Bahia_Banderas"
    - "America/Barbados"
    - "America/Belem"
    - "America/Belize"
    - "America/Blanc-Sablon"
    - "America/Boa_Vista"
    - "America/Bogota"
    - "America/Boise"
    - "America/Cambridge_Bay"
    - "America/Campo_Grande"
    - "America/Cancun"
    - "America/Caracas"
    - "America/Cayenne"
    - "America/Cayman"
    - "America/Chicago"
    - "America/Chihuahua"
    - "America/Costa_Rica"
    - "America/Creston"
    - "America/Cuiaba"
    - "America/Curacao"
    - "America/Danmarkshavn"
    - "America/Dawson"
    - "America/Dawson_Creek"
    - "America/Denver"
    - "America/Detroit"
    - "America/Dominica"
    - "America/Edmonton"
    - "America/Eirunepe"
    - "America/El_Salvador"
    - "America/Fort_Nelson"
    - "America/Fortaleza"
    - "America/Glace_Bay"
    - "America/Goose_Bay"
    - "America/Grand_Turk"
    - "America/Grenada"
    - "America/Guadeloupe"
    - "America/Guatemala"
    - "America/Guayaquil"
    - "America/Guyana"
    - "America/Halifax"
    - "America/Havana"
    - "America/Hermosillo"
    - "America/Indiana/Indianapolis"
    - "America/Indiana/Knox"
    - "America/Indiana/Marengo"
    - "America/Indiana/Petersburg"
    - "America/Indiana/Tell_City"
    - "America/Indiana/Vevay"
    - "America/Indiana/Vincennes"
    - "America/Indiana/Winamac"
    - "America/Inuvik"
    - "America/Iqaluit"
    - "America/Jamaica"
    - "America/Juneau"
    - "America/Kentucky/Louisville"
    - "America/Kentucky/Monticello"
    - "America/Kralendijk"
    - "America/La_Paz"
    - "America/Lima"
    - "America/Los_Angeles"
    - "America/Lower_Princes"
    - "America/Maceio"
    - "America/Managua"
    - "America/Manaus"
    - "America/Marigot"
    - "America/Martinique"
    - "America/Matamoros"
    - "America/Mazatlan"
    - "America/Menominee"
    - "America/Merida"
    - "America/Metlakatla"
    - "America/Mexico_City"
    - "America/Miquelon"
    - "America/Moncton"
    - "America/Monterrey"
    - "America/Montevideo"
    - "America/Montserrat"
    - "America/Nassau"
    - "America/New_York"
    - "America/Nipigon"
    - "America/Nome"
    - "America/Noronha"
    - "America/North_Dakota/Beulah"
    - "America/North_Dakota/Center"
    - "America/North_Dakota/New_Salem"
    - "America/Nuuk"
    - "America/Ojinaga"
    - "America/Panama"
    - "America/Pangnirtung"
    - "America/Paramaribo"
    - "America/Phoenix"
    - "America/Port-au-Prince"
    - "America/Port_of_Spain"
    - "America/Porto_Velho"
    - "America/Puerto_Rico"
    - "America/Punta_Arenas"
    - "America/Rainy_River"
    - "America/Rankin_Inlet"
    - "America/Recife"
    - "America/Regina"
    - "America/Resolute"
    - "America/Rio_Branco"
    - "America/Santarem"
    - "America/Santiago"
    - "America/Santo_Domingo"
    - "America/Sao_Paulo"
    - "America/Scoresbysund"
    - "America/Sitka"
    - "America/St_Barthelemy"
    - "America/St_Johns"
    - "America/St_Kitts"
    - "America/St_Lucia"
    - "America/St_Thomas"
    - "America/St_Vincent"
    - "America/Swift_Current"
    - "America/Tegucigalpa"
    - "America/Thule"
    - "America/Thunder_Bay"
    - "America/Tijuana"
    - "America/Toronto"
    - "America/Tortola"
    - "America/Vancouver"
    - "America/Whitehorse"
    - "America/Winnipeg"
    - "America/Yakutat"
    - "America/Yellowknife"
    - "Antarctica/Casey"
    - "Antarctica/Davis"
    - "Antarctica/DumontDUrville"
    - "Antarctica/Macquarie"
    - "Antarctica/Mawson"
    - "Antarctica/McMurdo"
    - "Antarctica/Palmer"
    - "Antarctica/Rothera"
    - "Antarctica/Syowa"
    - "Antarctica/Troll"
    - "Antarctica/Vostok"
    - "Arctic/Longyearbyen"
    - "Asia/Aden"
    - "Asia/Almaty"
    - "Asia/Amman"
    - "Asia/Anadyr"
    - "Asia/Aqtau"
    - "Asia/Aqtobe"
    - "Asia/Ashgabat"
    - "Asia/Atyrau"
    - "Asia/Baghdad"
    - "Asia/Bahrain"
    - "Asia/Baku"
    - "Asia/Bangkok"
    - "Asia/Barnaul"
    - "Asia/Beirut"
    - "Asia/Bishkek"
    - "Asia/Brunei"
    - "Asia/Chita"
    - "Asia/Choibalsan"
    - "Asia/Colombo"
    - "Asia/Damascus"
    - "Asia/Dhaka"
    - "Asia/Dili"
    - "Asia/Dubai"
    - "Asia/Dushanbe"
    - "Asia/Famagusta"
    - "Asia/Gaza"
    - "Asia/Hebron"
    - "Asia/Ho_Chi_Minh"
    - "Asia/Hong_Kong"
    - "Asia/Hovd"
    - "Asia/Irkutsk"
    - "Asia/Jakarta"
    - "Asia/Jayapura"
    - "Asia/Jerusalem"
    - "Asia/Kabul"
    - "Asia/Kamchatka"
    - "Asia/Karachi"
    - "Asia/Kathmandu"
    - "Asia/Khandyga"
    - "Asia/Kolkata"
    - "Asia/Krasnoyarsk"
    - "Asia/Kuala_Lumpur"
    - "Asia/Kuching"
    - "Asia/Kuwait"
    - "Asia/Macau"
    - "Asia/Magadan"
    - "Asia/Makassar"
    - "Asia/Manila"
    - "Asia/Muscat"
    - "Asia/Nicosia"
    - "Asia/Novokuznetsk"
    - "Asia/Novosibirsk"
    - "Asia/Omsk"
    - "Asia/Oral"
    - "Asia/Phnom_Penh"
    - "Asia/Pontianak"
    - "Asia/Pyongyang"
    - "Asia/Qatar"
    - "Asia/Qostanay"
    - "Asia/Qyzylorda"
    - "Asia/Riyadh"
    - "Asia/Sakhalin"
    - "Asia/Samarkand"
    - "Asia/Seoul"
    - "Asia/Shanghai"
    - "Asia/Singapore"
    - "Asia/Srednekolymsk"
    - "Asia/Taipei"
    - "Asia/Tashkent"
    - "Asia/Tbilisi"
    - "Asia/Tehran"
    - "Asia/Thimphu"
    - "Asia/Tokyo"
    - "Asia/Tomsk"
    - "Asia/Ulaanbaatar"
    - "Asia/Urumqi"
    - "Asia/Ust-Nera"
    - "Asia/Vientiane"
    - "Asia/Vladivostok"
    - "Asia/Yakutsk"
    - "Asia/Yangon"
    - "Asia/Yekaterinburg"
    - "Asia/Yerevan"
    - "Atlantic/Azores"
    - "Atlantic/Bermuda"
    - "Atlantic/Canary"
    - "Atlantic/Cape_Verde"
    - "Atlantic/Faroe"
    - "Atlantic/Madeira"
    - "Atlantic/Reykjavik"
    - "Atlantic/South_Georgia"
    - "Atlantic/St_Helena"
    - "Atlantic/Stanley"
    - "Australia/Adelaide"
    - "Australia/Brisbane"
    - "Australia/Broken_Hill"
    - "Australia/Currie"
    - "Australia/Darwin"
    - "Australia/Eucla"
    - "Australia/Hobart"
    - "Australia/Lindeman"
    - "Australia/Lord_Howe"
    - "Australia/Melbourne"
    - "Australia/Perth"
    - "Australia/Sydney"
    - "Europe/Amsterdam"
    - "Europe/Andorra"
    - "Europe/Astrakhan"
    - "Europe/Athens"
    - "Europe/Belgrade"
    - "Europe/Berlin"
    - "Europe/Bratislava"
    - "Europe/Brussels"
    - "Europe/Bucharest"
    - "Europe/Budapest"
    - "Europe/Busingen"
    - "Europe/Chisinau"
    - "Europe/Copenhagen"
    - "Europe/Dublin"
    - "Europe/Gibraltar"
    - "Europe/Guernsey"
    - "Europe/Helsinki"
    - "Europe/Isle_of_Man"
    - "Europe/Istanbul"
    - "Europe/Jersey"
    - "Europe/Kaliningrad"
    - "Europe/Kiev"
    - "Europe/Kirov"
    - "Europe/Lisbon"
    - "Europe/Ljubljana"
    - "Europe/London"
    - "Europe/Luxembourg"
    - "Europe/Madrid"
    - "Europe/Malta"
    - "Europe/Mariehamn"
    - "Europe/Minsk"
    - "Europe/Monaco"
    - "Europe/Moscow"
    - "Europe/Oslo"
    - "Europe/Paris"
    - "Europe/Podgorica"
    - "Europe/Prague"
    - "Europe/Riga"
    - "Europe/Rome"
    - "Europe/Samara"
    - "Europe/San_Marino"
    - "Europe/Sarajevo"
    - "Europe/Saratov"
    - "Europe/Simferopol"
    - "Europe/Skopje"
    - "Europe/Sofia"
    - "Europe/Stockholm"
    - "Europe/Tallinn"
    - "Europe/Tirane"
    - "Europe/Ulyanovsk"
    - "Europe/Uzhgorod"
    - "Europe/Vaduz"
    - "Europe/Vatican"
    - "Europe/Vienna"
    - "Europe/Vilnius"
    - "Europe/Volgograd"
    - "Europe/Warsaw"
    - "Europe/Zagreb"
    - "Europe/Zaporozhye"
    - "Europe/Zurich"
    - "Indian/Antananarivo"
    - "Indian/Chagos"
    - "Indian/Christmas"
    - "Indian/Cocos"
    - "Indian/Comoro"
    - "Indian/Kerguelen"
    - "Indian/Mahe"
    - "Indian/Maldives"
    - "Indian/Mauritius"
    - "Indian/Mayotte"
    - "Indian/Reunion"
    - "Pacific/Apia"
    - "Pacific/Auckland"
    - "Pacific/Bougainville"
    - "Pacific/Chatham"
    - "Pacific/Chuuk"
    - "Pacific/Easter"
    - "Pacific/Efate"
    - "Pacific/Enderbury"
    - "Pacific/Fakaofo"
    - "Pacific/Fiji"
    - "Pacific/Funafuti"
    - "Pacific/Galapagos"
    - "Pacific/Gambier"
    - "Pacific/Guadalcanal"
    - "Pacific/Guam"
    - "Pacific/Honolulu"
    - "Pacific/Kiritimati"
    - "Pacific/Kosrae"
    - "Pacific/Kwajalein"
    - "Pacific/Majuro"
    - "Pacific/Marquesas"
    - "Pacific/Midway"
    - "Pacific/Nauru"
    - "Pacific/Niue"
    - "Pacific/Norfolk"
    - "Pacific/Noumea"
    - "Pacific/Pago_Pago"
    - "Pacific/Palau"
    - "Pacific/Pitcairn"
    - "Pacific/Pohnpei"
    - "Pacific/Port_Moresby"
    - "Pacific/Rarotonga"
    - "Pacific/Saipan"
    - "Pacific/Tahiti"
    - "Pacific/Tarawa"
    - "Pacific/Tongatapu"
    - "Pacific/Wake"
    - "Pacific/Wallis"
    default: "UTC"
    required: false

  ssh_authorized_keys:
    title: SSH Public Key
    description: Use the corresponding private key to access the Essbase compute instance.
    type: oci:core:ssh:publickey
    required: true

  data_volume_size:
    title: Data Volume Size (in GB)
    description: Define the target size of the data volume, which stores the Essbase application data.
    type: integer
    default: 1024
    minimum: 256
    multipleOf: 1
    required: true

  config_volume_size:
    title: Config Volume Size (in GB)
    description: Define the target size of the configuration volume, which stored the Essbase configuration data.
    type: integer
    visible: false
    minimum: 64
    multipleOf: 1

  temp_volume_size:
    title: Temp Volume Size (in GB)
    description: Define the target size of the temp volume, which stores temporary data used during runtime.
    type: integer
    visible: false
    minimum: 64
    multipleOf: 1

  essbase_admin_username:
    title: Essbase System Admin User Name
    description: The name of the Essbase system administrator.
    type: string
    minLength: 5
    maxLength: 128
    pattern: "^[a-zA-Z][a-zA-Z0-9]{4,127}$"
    default: admin
    required: true

  essbase_admin_password_id:
    title: Essbase System Admin User Password
    description: "The OCID for the secret that contains the password for the Essbase system administrator. The password must start with a letter, is between 8 and 30 characters long, contains at least one number, and, optionally, any number of the special characters ($ # _). For example, Ach1z0#d."
    type: string
    pattern: "^ocid1\\.vaultsecret\\.[a-zA-Z0-9\\.\\-\\_]+$"
    required: true

  rcu_schema_prefix:
    title: RCU Schema Prefix
    description: Schema prefix to use when running RCU. A value with be automatically generated if not specified.
    type: string
    maxLength: 12
    pattern: "^([a-zA-Z][a-zA-Z0-9]{0,11})?$"
    visible: false

  enable_essbase_monitoring:
    title: Enable Metrics Collection
    description: Select this option to publish metrics periodically to OCI Monitoring Service.
    type: boolean
    default: false

  enable_embedded_proxy:
    title: Enable Embedded Proxy
    description: Disables the embedded proxy on the target Essbase compute node. EXPERIMENTAL.
    type: boolean
    default: true
    visible: false

  # Load balancer options
  create_load_balancer:
    title: Provision Load Balancer
    description: Provision a load balancer in Oracle Cloud Infrastructure. The load balancer will be provisioned with a demo certificate. The use of demo certificate is not recommended for production workloads.
    type: boolean
    default: false
    visible:
      not:
      - ${enable_cluster}

  create_public_load_balancer:
    title: Public Load Balancer Visibility
    description: Select if you want the load balancer to have a public IP address.
    type: boolean
    default: true
    visible:
      or:
      - ${enable_cluster}
      - ${create_load_balancer}

  load_balancer_shape:
    title: Load Balancer Shape
    description: Select which load balancer shape.
    type: enum
    enum:
    - 100Mbps
    - 400Mbps
    - 8000Mbps
    default: 100Mbps
    visible:
      or:
      - ${enable_cluster}
      - ${create_load_balancer}

  load_balancer_subnet_cidr:
    title: Load Balancer Subnet CIDR
    description: The CIDR to assign to the subnet for the load balancer.  This will be created as regional subnet.
    type: string
    default: 10.0.4.0/24
    pattern: "^(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])\\/(3[0-2]|[1-2]?[0-9])$"
    visible:
      and:
      - ${show_advanced_options}
      - or:
        - ${enable_cluster}
        - ${create_load_balancer}
      - not:
        - ${use_existing_vcn}
    required: true

  existing_load_balancer_subnet_compartment_id:
    title: Target load balancer subnet compartment
    description: Select the compartment containing the target load balancer subnets.
    type: oci:identity:compartment:id
    default: ${compartment_ocid}
    visible:
      and:
      - or:
        - ${enable_cluster}
        - ${create_load_balancer}
      - ${use_existing_vcn}
    required: true

  existing_load_balancer_subnet_id:
    title: Select Load Balancer Subnet
    description: Select an existing subnet to use for the load balancer.
    type: oci:core:subnet:id
    visible: 
      and:
      - or:
        - ${enable_cluster}
        - ${create_load_balancer}
      - ${use_existing_vcn}
    required: true
    dependsOn:
      compartmentId: ${existing_load_balancer_subnet_compartment_id}
      vcnId: ${existing_vcn_id}
      hidePrivateSubnet: ${create_public_load_balancer}

  existing_load_balancer_subnet_id_2:
    title: Select Secondary Load Balancer Subnet
    description: Select an existing subnet to use for the second load balancer node. This field is required only if you are not using regional subnets.
    type: oci:core:subnet:id
    visible: 
      and:
      - or:
        - ${enable_cluster}
        - ${create_load_balancer}
      - ${use_existing_vcn}
      - ${create_public_load_balancer}
    dependsOn:
      compartmentId: ${existing_load_balancer_subnet_compartment_id}
      vcnId: ${existing_vcn_id}
      hideRegionalSubnet: true
      hidePrivateSubnet: ${create_public_load_balancer}

  # Database options
  use_existing_db:
    title: Use existing database
    description: Select this option to enable support of an existing database for the internal Essbase repository.
    type: boolean

  existing_db_type:
    title: Database Type
    description: Select which database you will use
    type: enum
    enum:
    - "Autonomous Database"
    - "Database System"
    default: "Autonomous Database"
    visible: ${use_existing_db}

  existing_db_compartment_id:
    title: Target database compartment
    type: oci:identity:compartment:id
    default: ${compartment_ocid}
    visible: ${use_existing_db}
    required: true

  existing_db_id:
    title: Target autonomous database
    description: Target Autonomous Database instance in which to create the Essbase schema.
    type: oci:database:autonomousdatabase:id
    visible:
      and:
      - eq:
        - ${existing_db_type}
        - "Autonomous Database"
      - ${use_existing_db}
    required: true
    dependsOn:
      compartmentId: ${existing_db_compartment_id} 

  db_admin_password_id:
    title: Database Admin User Password
    description: "The OCID for the secret that contains the database administrator password. The password must start with a letter, is between 12 and 30 characters long, contains at least one number, and at least one of the special characters ($ # _). For example, BEstr0ng_#12."
    type: string
    pattern: "^ocid1\\.vaultsecret\\.[a-zA-Z0-9\\.\\-\\_]+$"
    visible:
      or:
      - eq:
        - ${existing_db_type}
        - "Autonomous Database"
      - not:
        - ${use_existing_db}
    required: true

  db_license_model:
    title: Database License
    type: enum
    enum:
    - LICENSE_INCLUDED
    - BRING_YOUR_OWN_LICENSE
    default: BRING_YOUR_OWN_LICENSE
    visible:
      not:
      - ${use_existing_db}
    required: true


  existing_db_connect_string:
    title: Database Connection String
    description: Target database connect string
    type: string
    visible:
      and:
      - eq:
        - ${existing_db_type}
        - "Manual"
      - ${use_existing_db}
    required: true

  existing_oci_db_system_id:
    title: Target database system
    description: Target database system in which to create the Essbase schema.
    type: oci:database:dbsystem:id
    visible: 
      and:
      - eq:
        - ${existing_db_type}
        - "Database System"
      - ${use_existing_db}
    required: true
    dependsOn:
      compartmentId: ${existing_db_compartment_id}

  existing_oci_db_system_dbhome_id:
    title: Database home in the DB System
    description: The database home within the DB System
    type: oci:database:dbhome:id
    visible:
      and:
      - eq:
        - ${existing_db_type}
        - "Database System"
      - ${use_existing_db}
    required: true
    dependsOn:
      compartmentId: ${existing_db_compartment_id}
      dbSystemId: ${existing_oci_db_system_id}

  existing_oci_db_system_database_id:
    title: Database in the DB System
    description: The database within the DB System in which to create the Essbase schema.
    type: oci:database:database:id
    visible:
      and:
      - eq:
        - ${existing_db_type}
        - "Database System"
      - ${use_existing_db}
    required: true
    dependsOn:
      compartmentId: ${existing_db_compartment_id}
      dbHomeId: ${existing_oci_db_system_dbhome_id}

  existing_oci_db_system_database_pdb_name:
    title: Database PDB Name
    description: The name of the existing pdb in the target database. Required if not using the default pdb created during database provision.
    type: string
    pattern: "^([a-zA-Z0-9][a-zA-Z0-9_]*)?$"
    visible:
      and:
      - eq:
        - ${existing_db_type}
        - "Database System"
      - ${use_existing_db}
    required: false

  oci_db_admin_username:
    title: Database Admin User
    description: The username for the database administrator.
    type: string
    pattern: "^[a-zA-Z][a-zA-Z0-9$#_]{0,29}$"
    default: SYS
    visible:
      and: 
      - eq:
        - ${existing_db_type}
        - "Database System"
      - ${use_existing_db}
    required: true

  oci_db_admin_password_id:
    title: Database Admin User Password
    description: "The OCID for the secret that contains the database administrator password. The password must start with a letter, is between 12 and 30 characters long, contains at least one number, and at least one of the special characters ($ # _). For example, BEstr0ng_#12."
    type: string
    pattern: "^ocid1\\.vaultsecret\\.[a-zA-Z0-9\\.\\-\\_]+$"
    visible:
      and:
      - eq:
        - ${existing_db_type}
        - "Database System"
      - ${use_existing_db}
    required: true

  identity_provider:
    title: Identity Provider
    description: Choose embedded LDAP or integration with Identity Cloud Service (IDCS). The use of embedded LDAP is not recommended for production workloads.
    type: enum
    enum:
    - idcs
    - embedded
    default: idcs
    required: true

  idcs_tenant:
    title: IDCS Instance GUID
    description: The ID of your Identity Cloud Service instance, which typically has the format idcs-<guid>, and is part of the host name that you use to access Identity Cloud Service.
    type: string
    visible:
      eq:
      - ${identity_provider}
      - idcs
    required: true
 
  idcs_client_id:
    title: IDCS Application Client ID
    description: Provide the IDCS application client ID
    type: string
    visible:
      eq:
      - ${identity_provider}
      - idcs
    required: true

  idcs_client_secret_id:
    title: IDCS Application Client Secret
    description: Provide the OCID for the secret that contains the IDCS application client secret.
    type: string
    pattern: "^ocid1\\.vaultsecret\\.[a-zA-Z0-9\\.\\-\\_]+$"
    visible:
      eq:
      - ${identity_provider}
      - idcs
    required: true

  idcs_external_admin_username:
    title: IDCS Essbase Admin User
    description: Provide a user id to be registered as an Essbase administrator. This user must exist in the provided Identity Cloud Service instance.
    type: string
    visible:
      eq:
      - ${identity_provider}
      - idcs
    required: true

  # Notification settings
  notification_topic_id:
    title: Notification Topic OCID
    description: OCID for the notification topic on which stack related messages will be sent.
    type: string
    pattern: "^(ocid1\\.onstopic\\.[a-zA-Z0-9\\.\\-\\_]+)?$"
    required: false

outputs:
  stack_id:
    title: Stack ID
    type: string
  stack_display_name:
    title: Stack Display Name
    type: string
  stack_version:
    title: Stack Version
    type: string
  essbase_url:
    title: Essbase URL
    type: link
  essbase_external_url:
    title: Essbase External URL
    type: link
  essbase_redirect_url:
    title: Essbase Redirect URL
    type: string
  essbase_post_logout_redirect_url:
    title: Essbase Post Logout Redirect URL
    type: string
  essbase_node_display_names:
    title: Essbase Node Names
    type: list
  essbase_node_ids:
    title: Essbase Node Instance OCIDs
    type: list
  essbase_node_public_ips:
    title: Essbase Node Public IPs
    type: list
  essbase_node_private_ips:
    title: Essbase Node Private IPs
    type: list
  essbase_node_domain_names:
    title: Essbase Node FQDNs
    type: list
  bastion_host_id:
    title: Bastion Host Instance OCID
    type: ocid
  bastion_host_public_ip:
    title: Bastion Host Public IP
    type: string
  rcu_schema_prefix:
    title: RCU Schema Prefix
    type: string
  idcs_tenant:
    title: IDCS Instance GUID
    type: string
  idcs_client_id:
    title: IDCS Application Client ID
    type: string
  z_messages:
    title: Messages
    type: string
    visible: false

outputGroups:
- title: General
  outputs:
  - ${stack_id}
  - ${stack_display_name}
  - ${stack_version}

- title: Essbase Cluster Details
  outputs:
  - ${essbase_node_display_names}
  - ${essbase_node_ids}
  - ${essbase_node_public_ips}
  - ${essbase_node_private_ips}
  - ${essbase_node_domain_names}
  - ${rcu_schema_prefix}
  - ${essbase_url}
  - ${essbase_external_url}

- title: Bastion Host Details
  outputs:
  - ${bastion_host_id}
  - ${bastion_host_public_ip}

- title: Identity Cloud Service Details
  outputs:
  - ${idcs_tenant}
  - ${idcs_client_id}
  - ${essbase_redirect_url}
  - ${essbase_post_logout_redirect_url}

- title: Other
  outputs:
  - ${z_messages}

primaryOutputButton: ${essbase_external_url}

